<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sorting Visualizer - Full Edition</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: linear-gradient(135deg, #2b5876, #4e4376);
        color: #fff;
        text-align: center;
        margin: 0;
        padding: 0;
    }
    h1 { margin-top: 10px; }
    .controls {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 8px;
        margin: 10px;
    }
    select, input, button {
        padding: 8px;
        border-radius: 6px;
        border: none;
        font-size: 14px;
    }
    button {
        background: #ff9800;
        color: white;
        cursor: pointer;
        transition: 0.3s;
    }
    button:hover { background: #e68a00; }
    .array-container {
        display: flex;
        justify-content: center;
        align-items: flex-end;
        flex-wrap: wrap;
        gap: 5px;
        margin: 20px;
        min-height: 120px;
    }
    .block {
        width: 40px;
        height: 40px;
        background: #2196F3;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 4px;
        transition: background 0.3s;
        font-weight: bold;
        font-size: 14px;
    }
    .comparing { background: #f44336 !important; }
    .pivot { background: #ffeb3b !important; color: #000; }
    .sorted { background: #4CAF50 !important; }
    .log {
        max-height: 150px;
        overflow-y: auto;
        background: rgba(255,255,255,0.1);
        padding: 5px;
        border-radius: 5px;
        margin: 10px auto;
        width: 90%;
        font-size: 12px;
        text-align: left;
    }
    /* Modal Styles */
    .modal {
        display: none;
        position: fixed;
        z-index: 10;
        left: 0; top: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.7);
    }
    .modal-content {
        background: #fff;
        color: #000;
        margin: 10% auto;
        padding: 20px;
        border-radius: 8px;
        width: 90%;
        max-width: 500px;
    }
    .close {
        float: right;
        font-size: 18px;
        cursor: pointer;
        color: red;
    }
</style>
</head>
<body>
    <h1>Sorting Visualizer</h1>
    <div class="controls">
        <select id="algorithm">
            <option>Bubble Sort</option>
            <option>Selection Sort</option>
            <option>Insertion Sort</option>
            <option>Merge Sort</option>
            <option>Quick Sort</option>
            <option>Heap Sort</option>
            <option>Counting Sort</option>
            <option>Radix Sort</option>
        </select>
        <input type="text" id="arrayInput" placeholder="Enter numbers (comma separated)">
        <button onclick="generateArray()">Generate Random</button>
        <input type="range" id="speed" min="50" max="1000" value="300">
        <select id="mode">
            <option value="educational">Educational Mode</option>
            <option value="fast">Fast Mode</option>
        </select>
        <button onclick="startSort()">Start</button>
        <button onclick="pauseSort()">Pause</button>
        <button onclick="resumeSort()">Resume</button>
        <button onclick="showExplanation()">Algorithm Explanation</button>
    </div>
    <div class="array-container" id="array"></div>
    <div class="log" id="log"></div>

    <!-- Modal -->
    <div id="explainModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="algoName"></h2>
            <p id="algoDesc"></p>
            <p><strong>Time Complexity:</strong> <span id="algoTime"></span></p>
            <p><strong>Space Complexity:</strong> <span id="algoSpace"></span></p>
        </div>
    </div>

<script>
let array = [], sorting = false, paused = false, delay = 300;

function generateArray() {
    array = [];
    for(let i=0;i<10;i++) array.push(Math.floor(Math.random()*99)+1);
    renderArray();
}

function renderArray() {
    const container = document.getElementById("array");
    container.innerHTML = '';
    array.forEach(num => {
        let block = document.createElement("div");
        block.className = "block";
        block.textContent = num;
        container.appendChild(block);
    });
}

function logStep(msg) {
    if(document.getElementById("mode").value === "educational") {
        let log = document.getElementById("log");
        log.innerHTML += msg + "<br>";
        log.scrollTop = log.scrollHeight;
    }
}

async function startSort() {
    if(sorting) return;
    sorting = true;
    paused = false;
    let algo = document.getElementById("algorithm").value;
    if(document.getElementById("arrayInput").value.trim()) {
        array = document.getElementById("arrayInput").value.split(",").map(x=>parseInt(x.trim())).filter(x=>!isNaN(x));
    }
    renderArray();
    delay = document.getElementById("mode").value === "fast" ? 50 : parseInt(document.getElementById("speed").value);

    if(algo === "Bubble Sort") await bubbleSort();
    else if(algo === "Selection Sort") await selectionSort();
    else if(algo === "Insertion Sort") await insertionSort();
    else if(algo === "Merge Sort") await mergeSortDriver();
    else if(algo === "Quick Sort") await quickSortDriver();
    else if(algo === "Heap Sort") await heapSort();
    else if(algo === "Counting Sort") await countingSort();
    else if(algo === "Radix Sort") await radixSort();
    sorting = false;
}

// Utility
async function sleep(ms) {
    while(paused) await new Promise(r=>setTimeout(r,50));
    return new Promise(r=>setTimeout(r,ms));
}

function pauseSort(){ paused = true; }
function resumeSort(){ paused = false; }

async function highlight(i, j, cls) {
    const blocks = document.querySelectorAll(".block");
    blocks[i]?.classList.add(cls);
    blocks[j]?.classList.add(cls);
    await sleep(delay);
    blocks[i]?.classList.remove(cls);
    blocks[j]?.classList.remove(cls);
}

// Sorting Algorithms
async function bubbleSort(){
    let n = array.length;
    for(let i=0;i<n-1;i++){
        for(let j=0;j<n-i-1;j++){
            logStep(`Compare ${array[j]} and ${array[j+1]}`);
            await highlight(j, j+1, "comparing");
            if(array[j] > array[j+1]){
                [array[j], array[j+1]] = [array[j+1], array[j]];
                renderArray();
                await sleep(delay);
            }
        }
    }
}

// Other algorithms here (Selection, Insertion, Merge, Quick, Heap, Counting, Radix)
// For brevity, I’ll complete them in the next step

// Explanation data
const explanations = {
    "Bubble Sort": {
        desc: "Repeatedly compares adjacent elements and swaps them if they are in the wrong order.",
        time: "Best: O(n), Average: O(n²), Worst: O(n²)",
        space: "O(1)"
    },
    "Selection Sort": {
        desc: "Finds the minimum element in the unsorted portion and swaps it with the first unsorted element.",
        time: "Best: O(n²), Average: O(n²), Worst: O(n²)",
        space: "O(1)"
    },
    // Add the rest...
};

function showExplanation(){
    let algo = document.getElementById("algorithm").value;
    document.getElementById("algoName").textContent = algo;
    document.getElementById("algoDesc").textContent = explanations[algo]?.desc || "No description available.";
    document.getElementById("algoTime").textContent = explanations[algo]?.time || "-";
    document.getElementById("algoSpace").textContent = explanations[algo]?.space || "-";
    document.getElementById("explainModal").style.display = "block";
}
function closeModal(){
    document.getElementById("explainModal").style.display = "none";
}

generateArray();
</script>
</body>
</html>
